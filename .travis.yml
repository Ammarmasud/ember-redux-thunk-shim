language: node_js
sudo: false
node_js:
- '5.0'
- 'stable'
branches:
  except:
  - /^v[0-9\.]+/
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  directories:
    - node_modules
env:
  matrix:
  - EMBER_TRY_SCENARIO=ember-1-12
  - EMBER_TRY_SCENARIO=ember-1-13
  - EMBER_TRY_SCENARIO=ember-2-0
  - EMBER_TRY_SCENARIO=ember-2-1
  - EMBER_TRY_SCENARIO=ember-2-2
  - EMBER_TRY_SCENARIO=ember-2-3
  - EMBER_TRY_SCENARIO=ember-2-4
  - EMBER_TRY_SCENARIO=ember-2-5
  - EMBER_TRY_SCENARIO=ember-2-6
  - EMBER_TRY_SCENARIO=default
  - EMBER_TRY_SCENARIO=ember-release
  - EMBER_TRY_SCENARIO=ember-beta
  - EMBER_TRY_SCENARIO=ember-canary
  global:
    - CXX=g++-4.8
    - secure: aN76pq+/2FW2rvpT10QsBDMUWBpHtdQIrMjiC5HFusz3jzQuH1OvGKg1c6fsF4uyBfZ6WQ3uUFTQjOV+GE+zGzs8NyTHAeOurUQKxqmP1wrBDln0O27lc2+AuAYpCykV3xO7MNg+OkeGjLKZsK/sw7roKpJMfv6vzDMg1JlISyx/1FcPN4xs7COPd2GIxsSNxcG5bw2n8hcATorsgOz5pShXnb/LBgzxy0MPAygbVkQDbXevEgq4UbmLu5JkKK3V4gsnKCNMkPEBvLTPwLSgmnsWeICJPA2o6J2hJt/RN4r8OhaXlBL/UlD6zdd9VueWV9tXgJ58zsd53gEH68UGKYwqO9bRYzmNBV+S2IGTWuxMCkkRacw3yZljmA3w4JRFVAM3jhwPdKDC+QQdHkJeH3MktTET4mnjjX+AN/8b7+TpStzQ1iV//tzeseAbbFroX5D81avR5NCqU4JKZ65I05LIVXR+I524OXV1kzGdwtnK+/jC/sWvU9S4E5mI0WeJgg/FFNsCCEs2QSqbuR4Lz1bFrdnnzmcxGI2DxZUw1RpeoJEXC7RzySH9foteet/WSEaX9GamST6JxFiz+J5SAyamlWMBMoFjxJk5EZGk3mqbAiEkvX35yyWcKKUHJExCrjPevHK6KAMrSaFLlogLRH6sfUSLOzS8zJulMpbWFB8=
matrix:
  fast_finish: true
  allow_failures:
  - env: EMBER_TRY_SCENARIO=ember-beta
  - env: EMBER_TRY_SCENARIO=ember-canary
before_install:
- npm config set spin false
- npm install -g coveralls pr-bumper
- pr-bumper check
install:
- npm install
- bower install
before_script:
- "export DISPLAY=:99.0"
- "sh -e /etc/init.d/xvfb start"
- sleep 3 # give xvfb some time to start
script:
- npm run lint
- ember try:one $EMBER_TRY_SCENARIO --- ember test
after_success:
- .travis/publish-coverage.sh
before_deploy:
- pr-bumper bump
deploy:
  provider: npm
  email: npm.ciena@gmail.com
  skip_cleanup: true
  api_key:
    secure: C7Luvs2ubCfgkPofmgOzC1OL28ywL78tDgQnsMTshudak3UP8kZX6gMyr653xPV05HBBtJE5Z7SzvVN620i3AWe8jny56UrVF9EBELCBo529feN/1pndhurRmoowPVVPpVuVRS6pEGJ0IgB/IzaFYq3PMFSlum1RpkzGUTasCBDZLdmTF7RrzLa3ObJH9EwONv9RDkXlQoZDXdFz4rab630NwUAP+bhx3hfHXVES5CvfFxJYzSmo+Uy3V+oPc3YxlCJZ7zGTs5CoC2v5dSYhgRk+TAg591rZervlCEaQXJMfG17E4RP1Oah0BeIoKgrhsK59FAk1hpu7RHei4GrqV+3gS5U8DJT2Yc/mVLItvj2hroD5jvRuoXBH1BYrvR31zSy022peYuOGOjCIvzxWPLxhBZkHtsVmJZGHgehCuo09noR9S5IGqlPANkWDjgD7CkMQskcnqvTub3HxUoi8JK7EcIf6wbuP+sotn+q1zBUZFlKnG3fJzE5YWGkP/MQZkkhv9cGcB9lX1es1lhhdfOs0tfT3mKYbj6g/oBMp5/7tddLbx2TV3g2SYgtCNO3wzX3xzzBlLu3ilkeQKlr0dzFeOxzEhHMEtYsRd+Auqf3Y5fR+d2JEfPuZGcwL0L0Jp+4pmeTdj3KECi7EGRgfRZsJK8QQl8Od1itNfckvejo=
  on:
    branch: master
    condition: "$EMBER_TRY_SCENARIO = 'default'"
    node: 'stable'
    tags: false
notifications:
  slack:
    secure: JwIqPRHp1oHrQvZn1hdizzKFkP7n1Jl5Fr5xB8dFd0KFN885GZHgHVBBChj11LTlZmcwcGqOv9k2mmg0MTG2oCQDXDt05aQtb5BK6Mfa7k+eRtLk+elou1/GePu0JyHmYXr4D9e70E0tQgOppvAtptE0X7kc3cPqiM6F2AbU5gkYQ/B/LDqmuj95vubJy6Q5+K+EwTjemDzJ10SdbFgbILVnSWU+gC0WVYiaGCW2bqyZR5Xes3JkvOP3wBwVFC9D1fSkxGocrovJQbLuca1NWjwNiA/gSNkewabPuJWP+/IUJLNxC43SnV8lu8YPHcQCaBnShk9H3K+/F5lsDsBXfjTVR3W/+B8mdRRb3QDr93GBLV6lYAmVjkEKORhEX+/BOQnQL9nkaCkNGF8xZ+wwFbUHMF9DgjFTL/6PGO69X8QegG0FtviWEuXPYRVLCMAd5aXey8Vf/Zz4IU9VDHIWxV7E6xcBdWc3A4Ha0MfApb7rCOSz4qr3l60t2qUQKgs2BMuCKRmWZtQEIMYRXjQvN1sLU7Qol2BECABohPUAOXqQP9+lNjKMTbAPGrQAFX/PxLsoGTq0LDNX2BFWe0lwBDx0hsGuaBzKrdWcIRgTY71IJKcnC3qvd+bCnxl1LlDbE+8fsPMwtw2b6noLTG+IEBChRaVc1hHaCMWD642GlDQ=
